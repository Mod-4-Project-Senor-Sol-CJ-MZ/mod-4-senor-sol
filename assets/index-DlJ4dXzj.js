(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function o(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(t){if(t.ep)return;t.ep=!0;const s=o(t);fetch(t.href,s)}})();const D=()=>new Promise((e,n)=>{if(!navigator.geolocation){e({latitude:0,longitude:0});return}const o=t=>{const{latitude:s,longitude:a}=t.coords;e({latitude:s,longitude:a})},i=t=>{console.warn(`ERROR(${t.code}): ${t.message}`),e({latitude:0,longitude:0})};navigator.geolocation.getCurrentPosition(o,i)}),z=async e=>{const n=e.latitude,o=e.longitude,i=`https://api.sunrise-sunset.org/json?lat=${n}&lng=${o}&date=today&formatted=0`;try{const t=await fetch(i);if(!t.ok)throw new Error(`Error fetching data from Sunrise-Sunset API: ${t.status}`);const s=await t.json(),a=new Date(s.results.sunrise),c=new Date(s.results.sunset),r=a.toLocaleTimeString("en-US"),d=c.toLocaleTimeString("en-US");console.log(r,d);const l=new Date;let h=l.getDate(),u=l.getMonth()+1,m=`${l.getFullYear()}-${u}-${h}`;return console.log(m),{sunrise1:r,sunset1:d,currentDate:m}}catch(t){throw console.warn("Warning in getSunriseSunset:",t),t}},v=async e=>{const n=`https://api.zippopotam.us/us/${e}`;try{const o=await fetch(n);if(!o.ok)throw new Error(`Error fetching data from Zippopotam API: ${o.status}`);const t=(await o.json()).places[0],s=t.latitude,a=t.longitude,c=t["place name"],r=t["state abbreviation"];return{latitude:s,longitude:a,city:c,state:r}}catch(o){throw console.warn("Warning in getLocationData:",o),o}},B=async(e,n,o)=>{const i=`https://api.sunrise-sunset.org/json?lat=${e}&lng=${n}&date=${o}&formatted=0`;try{const t=await fetch(i);if(!t.ok)throw new Error(`Error fetching data from Sunrise-Sunset API: ${t.status}`);const s=await t.json(),a=s.results.sunrise,c=s.results.sunset;return{sunrise:a,sunset:c}}catch(t){throw console.warn("Warning in getSunriseSunset:",t),t}},_=async(e,n,o)=>{const i=`https://api.sunrise-sunset.org/json?lat=${e}&lng=${n}&date=${o}&formatted=0`;try{const t=await fetch(i);if(!t.ok)throw new Error(`Error fetching data from Sunrise-Sunset API: ${t.status}`);const s=await t.json(),{solar_noon:a,day_length:c,civil_twilight_begin:r,civil_twilight_end:d,nautical_twilight_begin:l,nautical_twilight_end:h,astronomical_twilight_begin:u,astronomical_twilight_end:w}=s.results;return{solarNoon:a,dayLength:c,civilTwilightBegin:r,civilTwilightEnd:d,nauticalTwilightBegin:l,nauticalTwilightEnd:h,astTwilightBegin:u,astTwilightEnd:w}}catch(t){throw console.warn("Warning in getSunriseSunsetMoreInfo:",t),t}},I=async e=>{try{const{city:n}=await v(e);return n!==void 0}catch(n){return console.warn("Error validating zipcode:",n),!1}},g=(e,n)=>{const o=new Date(e);return new Intl.DateTimeFormat("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",timeZone:n}).format(o)},M=()=>Math.floor(Math.random()*99741)+210,N=async(e,n)=>{const o=document.getElementById("default-info");console.log(e,n);const i=document.createElement("li");i.classList.add("default-date"),i.textContent=`Date: ${n.currentDate}`;const t=document.createElement("li");t.classList.add("default-coords");const s=document.createElement("li");s.classList.add("default-sunrise");const a=document.createElement("li");a.classList.add("default-sunset"),o.append(i,t,s,a);try{t.textContent=`Latitude, Longitude: ${e.latitude}, ${e.longitude}`,s.textContent=`Sunrise: ${n.sunrise1}`,a.textContent=`Sunset: ${n.sunset1}`}catch(c){console.warn(c)}},P=(e,n,o)=>{const i=document.getElementById(`ul:${n}`);i.innerHTML="";const{solarNoon:t,dayLength:s,civilTwilightBegin:a,civilTwilightEnd:c,nauticalTwilightBegin:r,nauticalTwilightEnd:d,astTwilightBegin:l,astTwilightEnd:h}=e,u=document.createElement("li");u.textContent=`Solar Noon: ${g(t,o)}`;const w=C=>{const y=Math.floor(C/3600),L=Math.floor(C%3600/60);return y>0?`${y} hour${y>1?"s":""} : ${L} minute${L>1?"s":""}`:`${L} minute${L>1?"s":""}`},m=document.createElement("li");m.textContent=` Day Length: ${w(s)}`;const f=document.createElement("li");f.textContent=`Civil Twilight Begin: ${g(a,o)}`;const p=document.createElement("li");p.textContent=`Civil Twilight End: ${g(c,o)}`;const E=document.createElement("li");E.textContent=`Nautical Twilight Begin: ${g(r,o)}`;const $=document.createElement("li");$.textContent=`Nautical Twilight End: ${g(d,o)}`;const S=document.createElement("li");S.textContent=`Astronomical Twilight Begin: ${g(l,o)}`;const T=document.createElement("li");T.textContent=`Astronomical Twilight End: ${g(h,o)}`,i.append(u,m,f,p,E,$,S,T)},x=async e=>{const n=document.getElementById("results-container");n.innerHTML="";const o=document.createElement("div");o.classList.add("latest-result-container");const i=document.createElement("div");i.classList.add("more-info-button");const t=document.createElement("button");t.classList.add("more-info-button"),t.textContent="More Info!",t.addEventListener("click",Z),i.append(t);const s=document.createElement("div");s.classList.add("more-info-container");const a=document.createElement("ul");a.classList.add("more-info-ul"),a.id=`ul:${e.zipcode}`,s.append(a);const c=document.createElement("div");c.classList.add("ul-container");const r=document.createElement("ul");r.classList.add("results-list"),c.append(r);const d=document.createElement("li");d.classList.add("results-zipcode"),d.textContent=`Zipcode: ${e.zipcode}`;const l=document.createElement("li");l.classList.add("results-date"),l.id=`${e.date}`,l.textContent=`Date: ${e.date}`;const h=document.createElement("li");l.classList.add("results-timezone"),h.textContent=`Timezone: ${e.timezone}`;const u=document.createElement("li");u.classList.add("results-location");const w=document.createElement("li");w.classList.add("results-coords");const m=document.createElement("li");m.classList.add("results-sunrise");const f=document.createElement("li");f.classList.add("results-sunset"),n.append(o),o.append(c,i,s),r.append(d,l,h,u,w,m,f);try{const{latitude:p,longitude:E,city:$,state:S}=await v(e.zipcode),T={zipcode:e.zipcode,date:e.date,latitude:p,longitude:E,timezone:e.timezone},C=`${JSON.stringify(T)}`;t.id=C,u.textContent=`Location: ${$}, ${S} ${e.zipcode}`,w.textContent=`Latitude, Longitude: ${p}, ${E}`;const{sunrise:y,sunset:L}=await B(p,E,e.date);m.textContent="Sunrise: "+g(y,e.timezone),f.textContent="Sunset: "+g(L,e.timezone)}catch(p){console.warn(p)}},U=async e=>{e.preventDefault();const n=e.target,o=new FormData(n),i=Object.fromEntries(o);if(!await I(i.zipcode))return alert("Invalid zipcode. Please enter a valid US zipcode.");await x(i),n.reset()},Z=async e=>{const n=e.target.id,o=JSON.parse(n),{zipcode:i,date:t,latitude:s,longitude:a,timezone:c}=o;console.log(o);const r=await _(s,a,t);P(r,i,c)},F=async()=>{let e=!1,n;for(;!e;)n=M(),e=await I(n);const o={zipcode:n,date:new Date().toISOString().split("T")[0],timezone:Intl.DateTimeFormat().resolvedOptions().timeZone};await x(o)},A=async()=>{const e=await D(),n=await z(e);await N(e,n),document.querySelector("#sunForm").addEventListener("submit",U),document.getElementById("lucky-button").addEventListener("click",F)};A();
