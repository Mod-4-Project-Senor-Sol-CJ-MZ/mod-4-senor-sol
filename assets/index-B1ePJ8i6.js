(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function o(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(t){if(t.ep)return;t.ep=!0;const s=o(t);fetch(t.href,s)}})();const h=()=>new Promise((e,n)=>{if(!navigator.geolocation){e({latitude:0,longitude:0});return}const o=t=>{const{latitude:s,longitude:a}=t.coords;e({latitude:s,longitude:a})},r=t=>{console.warn(`ERROR(${t.code}): ${t.message}`),e({latitude:0,longitude:0})};navigator.geolocation.getCurrentPosition(o,r)}),L=async e=>{const n=e.latitude,o=e.longitude,r=`https://api.sunrise-sunset.org/json?lat=${n}&lng=${o}&date=today&formatted=0`;try{const t=await fetch(r);if(!t.ok)throw new Error(`Error fetching data from Sunrise-Sunset API: ${t.status}`);const s=await t.json(),a=new Date(s.results.sunrise),i=new Date(s.results.sunset),c=a.toLocaleTimeString("en-US"),u=i.toLocaleTimeString("en-US");console.log(c,u);const l=new Date;let m=l.getDate(),g=l.getMonth()+1,d=`${l.getFullYear()}-${g}-${m}`;return console.log(d),{sunrise1:c,sunset1:u,currentDate:d}}catch(t){throw console.warn("Warning in getSunriseSunset:",t),t}},w=async e=>{const n=`https://api.zippopotam.us/us/${e}`;try{const o=await fetch(n);if(!o.ok)throw new Error(`Error fetching data from Zippopotam API: ${o.status}`);const t=(await o.json()).places[0],s=t.latitude,a=t.longitude,i=t["place name"],c=t["state abbreviation"];return{latitude:s,longitude:a,city:i,state:c}}catch(o){throw console.warn("Warning in getLocationData:",o),o}},$=async(e,n,o)=>{const r=`https://api.sunrise-sunset.org/json?lat=${e}&lng=${n}&date=${o}&formatted=0`;try{const t=await fetch(r);if(!t.ok)throw new Error(`Error fetching data from Sunrise-Sunset API: ${t.status}`);const s=await t.json(),a=s.results.sunrise,i=s.results.sunset;return{sunrise:a,sunset:i}}catch(t){throw console.warn("Warning in getSunriseSunset:",t),t}},S=async e=>{try{const{city:n}=await w(e);return n!==void 0}catch(n){return console.warn("Error validating zipcode:",n),!1}},p=(e,n)=>{const o=new Date(e);return new Intl.DateTimeFormat("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",timeZone:n}).format(o)},E=async e=>{const n=document.getElementById("results-list");n.innerHTML="";const o=document.createElement("li");o.classList.add("results-zipcode"),o.textContent=`Zipcode: ${e.zipcode}`;const r=document.createElement("li");r.classList.add("results-date"),r.textContent=`Date: ${e.date}`;const t=document.createElement("li");r.classList.add("results-timezone"),t.textContent=`Timezone: ${e.timezone}`;const s=document.createElement("li");s.classList.add("results-location");const a=document.createElement("li");a.classList.add("results-coords");const i=document.createElement("li");i.classList.add("results-sunrise");const c=document.createElement("li");c.classList.add("results-sunset"),n.append(o,r,t,s,a,i,c);try{const{latitude:u,longitude:l,city:m,state:g}=await w(e.zipcode);s.textContent=`Location: ${m}, ${g} ${e.zipcode}`,a.textContent=`Latitude, Longitude: ${u}, ${l}`;const{sunrise:f,sunset:d}=await $(u,l,e.date);i.textContent="Sunrise: "+p(f,e.timezone),c.textContent="Sunset: "+p(d,e.timezone)}catch(u){console.warn(u)}},y=async(e,n)=>{const o=document.getElementById("default-info");console.log(e,n);const r=document.createElement("li");r.classList.add("default-date"),r.textContent=`Date: ${n.currentDate}`;const t=document.createElement("li");t.classList.add("default-coords");const s=document.createElement("li");s.classList.add("default-sunrise");const a=document.createElement("li");a.classList.add("default-sunset"),o.append(r,t,s,a);try{t.textContent=`Latitude, Longitude: ${e.latitude}, ${e.longitude}`,s.textContent=`Sunrise: ${n.sunrise1}`,a.textContent=`Sunset: ${n.sunset1}`}catch(i){console.warn(i)}},D=async e=>{e.preventDefault();const n=e.target,o=new FormData(n),r=Object.fromEntries(o);if(console.log("Form Data:",r),!await S(r.zipcode))return alert("Invalid zipcode. Please enter a valid US zipcode.");await E(r),await y(r),n.reset()},z=async()=>{const e=await h();console.log(e);const n=await L(e);console.log(n),await y(e,n),document.querySelector("#sunForm").addEventListener("submit",D)};z();
